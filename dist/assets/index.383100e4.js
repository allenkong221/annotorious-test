import{e as b,g as Y,o as s,p as A,y as g,M as q,R as G,d as e,A as S,T as E,c,F as $,k as P,l as W,m as t,t as C,a as i,B as K,G as Q,z as M,C as j,S as X}from"./vendor.6c1a6c9f.js";import{o as Z}from"./index.1035ba61.js";import{_ as V,a as B,b as ee}from"./index.e571fdc0.js";import{u as N,d as O,_ as te,a as oe,b as se,c as ne}from"./BackButton.eb76b533.js";import{a as ae}from"./index.8edb269a.js";import"./FileUploader.8a9adc74.js";const le={class:"fixed top-0 left-0 w-full h-full bg-gray4 bg-opacity-50 z-5 flex justify-center items-center"},re=b({props:{modelValue:{type:Boolean,default:!1}},emits:["close","update:modelValue"],setup(h,{emit:a}){const f=h,_=Y(null);Z(_,()=>{l()});const l=()=>{f.modelValue&&(a("update:modelValue",!1),a("close"))};return(d,r)=>(s(),A(E,{name:"grow"},{default:g(()=>[q(e("div",le,[e("div",{ref:(u,o)=>{o.modalContent=u,_.value=u}},[S(d.$slots,"default",{},void 0,!0)],512)],512),[[G,h.modelValue]])]),_:3}))}});var ce=V(re,[["__scopeId","data-v-450d55eb"]]);const ie={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},_e=e("path",{d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12z",fill:"currentColor"},null,-1),de=[_e];function ue(h,a){return s(),c("svg",ie,de)}var pe={name:"mdi-trash",render:ue};const me={class:"flex flex-col"},ve=["onMouseenter","onMouseleave","onClick"],he=b({setup(h){const{templateAnnotations:a,selectedTemplateIndex:f}=N(),{removeAnnotation:_,selectedAnnotationId:l,selectAnnotation:d}=O(),r=o=>{var m;(m=document.querySelector(`[data-id="${o}"]`))==null||m.classList.add("hovered")},u=o=>{var m;(m=document.querySelector(`[data-id="${o}"]`))==null||m.classList.remove("hovered")};return(o,m)=>{const w=pe;return s(),c("div",me,[(s(!0),c($,null,P(t(a)[t(f)],v=>(s(),c("div",{class:W(["flex p-2 border justify-between cursor-pointer hover:border-gray4 transition",{["border-gray2"]:t(l)!==v.id,["border-primary"]:t(l)===v.id}]),onMouseenter:x=>r(v.id),onMouseleave:x=>u(v.id),onClick:x=>t(d)(v.id)},[e("p",null,C(v.name),1),i(w,{onClick:K(x=>t(_)(v.id),["stop"]),class:"text-gray2 transition hover:text-gray4 cursor-pointer"},null,8,["onClick"])],42,ve))),256))])}}});const fe={class:"bg-white w-95vw h-90vh rounded-lg relative flex flex-col p-12"},xe={class:"flex mb-5"},ge={class:"flex h-9/10 justify-between"},ye={key:0,class:"w-38/100 flex flex-col pl-12"},be=e("h5",{class:"text-h2 font-bold mb-4 text-gray4"}," 1. Upload Sample Documents ",-1),we=e("p",{class:"text-gray4 text-p mb-4"}," As the first step, upload a minimum of 5 documents with the same format. We recommend 10 or more. ",-1),$e={class:"flex items-center justify-center"},ke=e("span",null,"Next",-1),Ce=e("h5",{class:"text-h2 font-bold mb-4 text-gray4"}," 2. Label the Documents ",-1),Me={key:0,class:"text-gray4 text-p mb-4"},Ne={key:1,class:"text-gray4 text-p mb-4"},Te={class:"mt-auto flex flex-col"},Ae=e("p",{class:"text-p text-gray4 mb-2"}," Once you have finished labeling this document, click Next. ",-1),Se=b({setup(h){const{showNewTemplateModal:a,steps:f,newTemplateImage:_,newTemplateStep:l,templateImages:d,templateAnnotations:r,templateRawAnnotations:u,selectedTemplateIndex:o,firstTemplateReady:m,templateFiles:w}=N(),{getRawAnnotations:v,annotations:x}=O(),L=Q(),F=()=>{if(d.value.length<5){L.warning("Please upload at least 5 samples before proceeding");return}l.value=1;const n=d.value.length;r.value=[],u.value=[];for(let p=0;p<n;p++)r.value.push([]),u.value.push([])},I=()=>{if(o.value===0&&!m.value){m.value=!0;for(let n=0;n<r.value.length;n++)r.value[n]=JSON.parse(JSON.stringify(x.value)),u.value[n]=v()}if(o.value===d.value.length-1){J();return}R(o.value+1)},J=async()=>{console.log(r.value),console.log(w.value);const n=new FormData;for(const k of w.value)n.append("files",k);n.append("annotations",JSON.stringify(r.value));const[p,y]=await X(ae.post("/api/create_template_multidata",n));if(p){console.error(p);return}console.log(y)},R=n=>{const p=o.value,y=v();u.value[p]=y,r.value[p]=JSON.parse(JSON.stringify(x.value)),o.value=n,x.value=JSON.parse(JSON.stringify(r.value[n]))};return(n,p)=>{const y=te,k=oe,z=se,D=ne,T=B,H=he,U=ce;return s(),A(U,{"model-value":t(a),onClose:p[0]||(p[0]=We=>a.value=!1)},{default:g(()=>[e("div",fe,[e("div",xe,[i(y,{class:"mr-16"}),i(k,{steps:t(f),"active-index":t(l)},null,8,["steps","active-index"])]),e("div",ge,[i(z,{class:"w-62/100"}),t(_)?M("",!0):(s(),c("div",ye,[t(l)===0?(s(),c($,{key:0},[be,we,i(T,{type:"primary",onClick:F},{default:g(()=>[e("div",$e,[ke,i(D)])]),_:1})],64)):t(l)===1?(s(),c($,{key:1},[Ce,t(o)===0?(s(),c("p",Me," Create a bounding box around each text area you want to capture and give it a label. Once you've finished labeling, click 'Next'. ")):t(o)!==0?(s(),c("p",Ne,C(t(o)===t(d).length-1?"Congrats! Now we're off to the verification step!":`Great job! You've labelled your first document. For the remaining
              documents, adjust each bounding box to ensure the texts are
              covered.`),1)):M("",!0),i(H),e("div",Te,[Ae,i(T,{outlined:"",onClick:I},{default:g(()=>[j(C(t(o)===t(d).length-1?"Submit":"Next"),1)]),_:1})])],64)):t(l)===2?(s(),c($,{key:2},[],64)):M("",!0)]))])])]),_:1},8,["model-value"])}}});const je=b({emits:["click"],setup(h,{emit:a}){return(f,_)=>(s(),c("div",{onClick:_[0]||(_[0]=l=>a("click")),class:"template-card border-dashed border-2 border-secondary rounded-lg h-100 w-100 flex justify-center items-center cursor-pointer bg-gray1 hover:bg-gray2 hover:bg-opacity-25 transition"},[S(f.$slots,"default",{},void 0,!0)]))}});var Ve=V(je,[["__scopeId","data-v-66053c66"]]);const Be={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 15 15"},Oe=e("g",{fill:"none"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.292.049a.5.5 0 0 1 .535.077L12.86 7.95a.5.5 0 0 1-.306.878l-3.334.147l1.931 4.244a.5.5 0 0 1-.247.662l-2.153.98a.5.5 0 0 1-.662-.247L6.153 10.37l-2.29 2.416A.5.5 0 0 1 3 12.44V.504a.5.5 0 0 1 .292-.455zM4 1.599v9.589l1.938-2.044a.5.5 0 0 1 .818.137l2.035 4.463l1.242-.566l-2.031-4.463a.5.5 0 0 1 .433-.707l2.82-.124L4 1.599z",fill:"currentColor"})],-1),Le=[Oe];function Fe(h,a){return s(),c("svg",Be,Le)}var Ie={name:"radix-icons-cursor-arrow",render:Fe};const Je={cass:"flex flex-col"},Re={class:"flex items-center justify-between"},ze={class:"flex items-center mb-8"},De=e("h1",{class:"text-h1 font-extrabold"},"Templates",-1),He=j("Upload File"),Ue=e("p",{class:"text-p"}," Create a new template or use an existing template to extract data from your documents. ",-1),Ye={class:"flex mt-8"},qe={class:"flex flex-col justify-center items-center w-full h-full group hover:bg-secondary transition"},Ge={class:"flex items-center mb-2"},Ee=e("span",{class:"text-p text-gray3 uppercase group-hover:text-white transition"},"Click Here",-1),Pe=e("span",{class:"text-h3 font-semibold text-center"},[e("span",{class:"text-error group-hover:text-white transition"},"Create "),e("span",{class:"text-black group-hover:text-white transition"},"a "),e("span",{class:"text-primary group-hover:text-white transition"},"new "),e("span",{class:"text-secondary group-hover:text-white transition"},"template")],-1),ot=b({setup(h){const{showNewTemplateModal:a}=N();return(f,_)=>{const l=ee,d=B,r=Ie,u=Ve,o=Se;return s(),c("div",Je,[e("div",Re,[e("div",ze,[i(l,{class:"text-h1 text-secondary mr-2"}),De]),i(d,{type:"secondary",disabled:"",class:"my-auto"},{default:g(()=>[He]),_:1})]),Ue,e("div",Ye,[i(u,{onClick:_[0]||(_[0]=m=>a.value=!0)},{default:g(()=>[e("div",qe,[e("div",Ge,[i(r,{class:"text-secondary text-p mr-1 group-hover:text-white transition"}),Ee]),Pe])]),_:1})]),i(o)])}}});export{ot as default};
