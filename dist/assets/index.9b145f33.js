import{e as $,g as T,o as s,p as O,y,M as W,R as K,d as e,A,T as Q,c as l,F as k,k as X,l as Z,m as t,t as b,a as r,B as ee,G as te,z as N,C as L,S as oe}from"./vendor.16486713.js";import{o as se}from"./index.a68d3dc9.js";import{_ as S,a as F,b as ne}from"./index.ee6d89d7.js";import{u as j,d as I,_ as ae,a as le,b as re,c as ce}from"./BackButton.6091b69f.js";import{a as ie}from"./index.8edb269a.js";import"./FileUploader.5fe40029.js";const _e={class:"fixed top-0 left-0 w-full h-full bg-gray4 bg-opacity-50 z-5 flex justify-center items-center"},de=$({props:{modelValue:{type:Boolean,default:!1}},emits:["close","update:modelValue"],setup(m,{emit:n}){const h=m,c=T(null);se(c,()=>{f()});const f=()=>{h.modelValue&&(n("update:modelValue",!1),n("close"))};return(x,u)=>(s(),O(Q,{name:"grow"},{default:y(()=>[W(e("div",_e,[e("div",{ref:(i,o)=>{o.modalContent=i,c.value=i}},[A(x.$slots,"default",{},void 0,!0)],512)],512),[[K,m.modelValue]])]),_:3}))}});var ue=S(de,[["__scopeId","data-v-450d55eb"]]);const pe={},me={class:"simple-card"};function ve(m,n){return s(),l("div",me,[A(m.$slots,"default",{},void 0,!0)])}var he=S(pe,[["render",ve],["__scopeId","data-v-b693141c"]]);const fe={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},xe=e("path",{d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12z",fill:"currentColor"},null,-1),ge=[xe];function ye(m,n){return s(),l("svg",fe,ge)}var be={name:"mdi-trash",render:ye};const we={class:"flex flex-col"},$e=["onMouseenter","onMouseleave","onClick"],ke=$({setup(m){const{templateAnnotations:n,selectedTemplateIndex:h}=j(),{removeAnnotation:c,selectedAnnotationId:f,selectAnnotation:x}=I(),u=o=>{var _;(_=document.querySelector(`[data-id="${o}"]`))==null||_.classList.add("hovered")},i=o=>{var _;(_=document.querySelector(`[data-id="${o}"]`))==null||_.classList.remove("hovered")};return(o,_)=>{const d=be;return s(),l("div",we,[(s(!0),l(k,null,X(t(n)[t(h)],v=>(s(),l("div",{class:Z(["flex p-2 border justify-between cursor-pointer hover:border-gray4 transition",{["border-gray2"]:t(f)!==v.id,["border-primary"]:t(f)===v.id}]),onMouseenter:g=>u(v.id),onMouseleave:g=>i(v.id),onClick:g=>t(x)(v.id)},[e("p",null,b(v.name),1),r(d,{onClick:ee(g=>t(c)(v.id),["stop"]),class:"text-gray2 transition hover:text-gray4 cursor-pointer"},null,8,["onClick"])],42,$e))),256))])}}});const Ce={class:"bg-white w-95vw h-90vh rounded-lg relative flex flex-col p-12"},Me={class:"flex mb-5"},Te={class:"flex h-9/10 justify-between"},Ae={key:0,class:"w-38/100 flex flex-col pl-12"},Ne=e("h5",{class:"text-h2 font-bold mb-4 text-gray4"}," 1. Upload Sample Documents ",-1),Se=e("p",{class:"text-gray4 text-p mb-4"}," As the first step, upload a minimum of 5 documents with the same format. We recommend 10 or more. ",-1),je={class:"flex items-center justify-center"},Ve=e("span",null,"Next",-1),Be=e("h5",{class:"text-h2 font-bold mb-4 text-gray4"}," 2. Label the Documents ",-1),Oe={key:0,class:"text-gray4 text-p mb-4"},Le={key:1,class:"text-gray4 text-p mb-4"},Fe={class:"mt-auto flex flex-col"},Ie=e("p",{class:"text-p text-gray4 mb-2"}," Once you have finished labeling this document, click Next. ",-1),Re=e("h5",{class:"text-h2 font-bold mb-4 text-gray4"}," 3. Verify Retrieved Values ",-1),Je=e("p",{class:"text-gray4 text-p mb-2"}," For each label, please verify if the values are correct. This will improve the accuracy of the model and save you more time in the future. ",-1),ze={class:"text-gray4 text-p mb-4"},De=$({setup(m){const n=T(6),h=T(10),{showNewTemplateModal:c,steps:f,newTemplateImage:x,newTemplateStep:u,templateImages:i,templateAnnotations:o,templateRawAnnotations:_,selectedTemplateIndex:d,firstTemplateReady:v,templateFiles:g}=j(),{getRawAnnotations:V,annotations:C,toggleAnnotations:R}=I(),J=te(),z=()=>{if(i.value.length<5){J.warning("Please upload at least 5 samples before proceeding");return}u.value=1;const a=i.value.length;o.value=[],_.value=[];for(let p=0;p<a;p++)o.value.push([]),_.value.push([])},D=async()=>{if(d.value===0&&!v.value){v.value=!0;for(let a=0;a<o.value.length;a++)o.value[a]=JSON.parse(JSON.stringify(C.value)),_.value[a]=V()}if(d.value===i.value.length-1){await H(),u.value=2;return}U(d.value+1)},H=async()=>{console.log(o.value),console.log(g.value);const a=new FormData;for(const M of g.value)a.append("files",M);a.append("annotations",JSON.stringify(o.value));const[p,w]=await oe(ie.post("/api/create_template_multidata",a));if(p){console.error(p);return}R(),d.value=0,console.log(w)},U=a=>{const p=d.value,w=V();_.value[p]=w,o.value[p]=JSON.parse(JSON.stringify(C.value)),d.value=a,C.value=JSON.parse(JSON.stringify(o.value[a]))};return(a,p)=>{const w=ae,M=le,Y=re,q=ce,B=F,G=ke,E=he,P=ue;return s(),O(P,{"model-value":t(c),onClose:p[0]||(p[0]=lt=>c.value=!1)},{default:y(()=>[e("div",Ce,[e("div",Me,[r(w,{class:"mr-16"}),r(M,{steps:t(f),"active-index":t(u)},null,8,["steps","active-index"])]),e("div",Te,[r(Y,{class:"w-62/100"}),t(x)?N("",!0):(s(),l("div",Ae,[t(u)===0?(s(),l(k,{key:0},[Ne,Se,r(B,{type:"primary",onClick:z},{default:y(()=>[e("div",je,[Ve,r(q)])]),_:1})],64)):t(u)===1?(s(),l(k,{key:1},[Be,t(d)===0?(s(),l("p",Oe," Create a bounding box around each text area you want to capture and give it a label. Once you've finished labeling, click 'Next'. ")):t(d)!==0?(s(),l("p",Le,b(t(d)===t(i).length-1?"Congrats! Now we're off to the verification step!":`Great job! You've labelled your first document. For the remaining
              documents, adjust each bounding box to ensure the texts are
              covered.`),1)):N("",!0),r(G),e("div",Fe,[Ie,r(B,{outlined:"",onClick:D},{default:y(()=>[L(b(t(d)===t(i).length-1?"Submit":"Next"),1)]),_:1})])],64)):t(u)===2?(s(),l(k,{key:2},[Re,Je,e("p",ze," There are "+b(n.value)+" labels x "+b(h.value)+" documents = "+b(n.value*h.value)+" values to check in total. ",1),r(E)],64)):N("",!0)]))])])]),_:1},8,["model-value"])}}});const He=$({emits:["click"],setup(m,{emit:n}){return(h,c)=>(s(),l("div",{onClick:c[0]||(c[0]=f=>n("click")),class:"template-card border-dashed border-2 border-secondary rounded-lg h-100 w-100 flex justify-center items-center cursor-pointer bg-gray1 hover:bg-gray2 hover:bg-opacity-25 transition"},[A(h.$slots,"default",{},void 0,!0)]))}});var Ue=S(He,[["__scopeId","data-v-66053c66"]]);const Ye={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 15 15"},qe=e("g",{fill:"none"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.292.049a.5.5 0 0 1 .535.077L12.86 7.95a.5.5 0 0 1-.306.878l-3.334.147l1.931 4.244a.5.5 0 0 1-.247.662l-2.153.98a.5.5 0 0 1-.662-.247L6.153 10.37l-2.29 2.416A.5.5 0 0 1 3 12.44V.504a.5.5 0 0 1 .292-.455zM4 1.599v9.589l1.938-2.044a.5.5 0 0 1 .818.137l2.035 4.463l1.242-.566l-2.031-4.463a.5.5 0 0 1 .433-.707l2.82-.124L4 1.599z",fill:"currentColor"})],-1),Ge=[qe];function Ee(m,n){return s(),l("svg",Ye,Ge)}var Pe={name:"radix-icons-cursor-arrow",render:Ee};const We={cass:"flex flex-col"},Ke={class:"flex items-center justify-between"},Qe={class:"flex items-center mb-8"},Xe=e("h1",{class:"text-h1 font-extrabold"},"Templates",-1),Ze=L("Upload File"),et=e("p",{class:"text-p"}," Create a new template or use an existing template to extract data from your documents. ",-1),tt={class:"flex mt-8"},ot={class:"flex flex-col justify-center items-center w-full h-full group hover:bg-secondary transition"},st={class:"flex items-center mb-2"},nt=e("span",{class:"text-p text-gray3 uppercase group-hover:text-white transition"},"Click Here",-1),at=e("span",{class:"text-h3 font-semibold text-center"},[e("span",{class:"text-error group-hover:text-white transition"},"Create "),e("span",{class:"text-black group-hover:text-white transition"},"a "),e("span",{class:"text-primary group-hover:text-white transition"},"new "),e("span",{class:"text-secondary group-hover:text-white transition"},"template")],-1),pt=$({setup(m){const{showNewTemplateModal:n}=j();return(h,c)=>{const f=ne,x=F,u=Pe,i=Ue,o=De;return s(),l("div",We,[e("div",Ke,[e("div",Qe,[r(f,{class:"text-h1 text-secondary mr-2"}),Xe]),r(x,{type:"secondary",disabled:"",class:"my-auto"},{default:y(()=>[Ze]),_:1})]),et,e("div",tt,[r(i,{onClick:c[0]||(c[0]=_=>n.value=!0)},{default:y(()=>[e("div",ot,[e("div",st,[r(u,{class:"text-secondary text-p mr-1 group-hover:text-white transition"}),nt]),at])]),_:1})]),r(o)])}}});export{pt as default};
